# Analise Hemograma

A Java 17 Spring Boot application for hemogram analysis, containerized with Docker and orchestrated using Docker Compose. The application connects to a PostgreSQL database.

## Project Structure

```
.
├── Dockerfile
├── docker-compose.yml
├── pom.xml
├── src/
│   ├── main/
│   │   ├── java/
│   │   └── resources/
│   └── test/
│       ├── java/
│       └── resources/
└── target/
```

## Prerequisites

- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)
- Java 17 (for local development)
- Maven (for local builds)

## Running with Docker Compose

1. Build and start the application and database:

   ```sh
   docker-compose up --build
   ```

2. The application will be available at [http://localhost:8080](http://localhost:8080).

3. The PostgreSQL database will be accessible at `localhost:5433` (default user: `postgres`, password: `batata`).

4. Debugging is enabled on port `5005`.

## Configuration

- Application properties can be found in `src/main/resources/application.properties`.
- Database connection is configured via environment variables in [docker-compose.yml](docker-compose.yml).

## Useful Commands

- **Build the JAR locally:**
  ```sh
  ./mvnw clean package
  ```
- **Run tests:**
  ```sh
  ./mvnw test
  ```

## Dockerfile

The [Dockerfile](Dockerfile) builds the application image, exposes ports 8080 (HTTP) and 5005 (debug), and runs the Spring Boot JAR.

---

## Data for Postgre Test
INSERT INTO PACIENTE (CPF, NOME, SEXO) VALUES ('12345678900', 'João Silva', 'M');
INSERT INTO HEMOGRAMA (DATA_ANALISE, CPF_PACIENTE, CONTAGEM_LEUCOCITOS, NEUTROFILOS, LINFOCITOS, MONOCITOS, EOSINOFILOS, BASOFILOS, CONTAGEM_ERITROCITOS, HEMOGLOBINA, HEMATOCRITO, VOLUME_CORPUSCULAR_MEDIO, HEMOGLOBINA_CORPUSCULAR_MEDIA, CONC_HEMOGLOBINA_CORPUSCULAR_MEDIA, AMPLITUDE_DIST_ERITROCITARIA, CONTAGEM_PLAQUETAS, VOLUME_PLAQUETARIO_MEDIO) VALUES ('2023-11-01', '12345678900', 6000, 55, 30, 10, 3, 2, 4.5, 14.0, 42.0, 90.0, 30.0, 33.0, 12.0, 250000, 10.0);
INSERT INTO HEMOGRAMA (DATA_ANALISE, CPF_PACIENTE, CONTAGEM_LEUCOCITOS, NEUTROFILOS, LINFOCITOS, MONOCITOS, EOSINOFILOS, BASOFILOS, CONTAGEM_ERITROCITOS, HEMOGLOBINA, HEMATOCRITO, VOLUME_CORPUSCULAR_MEDIO, HEMOGLOBINA_CORPUSCULAR_MEDIA, CONC_HEMOGLOBINA_CORPUSCULAR_MEDIA, AMPLITUDE_DIST_ERITROCITARIA, CONTAGEM_PLAQUETAS, VOLUME_PLAQUETARIO_MEDIO) VALUES ('2023-11-02', '12345678900', 7000, 60, 25, 8, 4, 3, 4.7, 15.0, 45.0, 92.0, 32.0, 34.0, 13.0, 260000, 11.0);
INSERT INTO HEMOGRAMA (DATA_ANALISE, CPF_PACIENTE, CONTAGEM_LEUCOCITOS, NEUTROFILOS, LINFOCITOS, MONOCITOS, EOSINOFILOS, BASOFILOS, CONTAGEM_ERITROCITOS, HEMOGLOBINA, HEMATOCRITO, VOLUME_CORPUSCULAR_MEDIO, HEMOGLOBINA_CORPUSCULAR_MEDIA, CONC_HEMOGLOBINA_CORPUSCULAR_MEDIA, AMPLITUDE_DIST_ERITROCITARIA, CONTAGEM_PLAQUETAS, VOLUME_PLAQUETARIO_MEDIO) VALUES ('2023-11-03', '12345678900', 6500, 58, 28, 9, 3, 2, 4.6, 14.5, 43.0, 91.0, 31.0, 33.5, 12.5, 255000, 10.5);
INSERT INTO HEMOGRAMA (DATA_ANALISE, CPF_PACIENTE, CONTAGEM_LEUCOCITOS, NEUTROFILOS, LINFOCITOS, MONOCITOS, EOSINOFILOS, BASOFILOS, CONTAGEM_ERITROCITOS, HEMOGLOBINA, HEMATOCRITO, VOLUME_CORPUSCULAR_MEDIO, HEMOGLOBINA_CORPUSCULAR_MEDIA, CONC_HEMOGLOBINA_CORPUSCULAR_MEDIA, AMPLITUDE_DIST_ERITROCITARIA, CONTAGEM_PLAQUETAS, VOLUME_PLAQUETARIO_MEDIO) VALUES ('2023-11-04', '12345678900', 7200, 62, 26, 7, 4, 3, 4.8, -15.2, 46.0, 93.0, 32.5, 34.5, 13.5, 265000, 11.5);

INSERT INTO PACIENTE (CPF, NOME, SEXO) VALUES ('12345678997', 'Maria Abreu', 'F');
INSERT INTO HEMOGRAMA (DATA_ANALISE, CPF_PACIENTE, CONTAGEM_LEUCOCITOS, NEUTROFILOS, LINFOCITOS, MONOCITOS, EOSINOFILOS, BASOFILOS, CONTAGEM_ERITROCITOS, HEMOGLOBINA, HEMATOCRITO, VOLUME_CORPUSCULAR_MEDIO, HEMOGLOBINA_CORPUSCULAR_MEDIA, CONC_HEMOGLOBINA_CORPUSCULAR_MEDIA, AMPLITUDE_DIST_ERITROCITARIA, CONTAGEM_PLAQUETAS, VOLUME_PLAQUETARIO_MEDIO) VALUES ('2023-10-15', '12345678997', 5800, 50, 35, 12, 2, 1, 4.4, 13.5, 40.0, 89.0, 29.0, 32.0, 11.5, 240000, 9.5);
INSERT INTO HEMOGRAMA (DATA_ANALISE, CPF_PACIENTE, CONTAGEM_LEUCOCITOS, NEUTROFILOS, LINFOCITOS, MONOCITOS, EOSINOFILOS, BASOFILOS, CONTAGEM_ERITROCITOS, HEMOGLOBINA, HEMATOCRITO, VOLUME_CORPUSCULAR_MEDIO, HEMOGLOBINA_CORPUSCULAR_MEDIA, CONC_HEMOGLOBINA_CORPUSCULAR_MEDIA, AMPLITUDE_DIST_ERITROCITARIA, CONTAGEM_PLAQUETAS, VOLUME_PLAQUETARIO_MEDIO) VALUES ('2023-10-20', '12345678997', 6000, 52, 33, 11, 3, 1, 4.5, 14.0, 42.0, 90.0, 30.0, 33.0, 12.0, 250000, 10.0);
INSERT INTO HEMOGRAMA (DATA_ANALISE, CPF_PACIENTE, CONTAGEM_LEUCOCITOS, NEUTROFILOS, LINFOCITOS, MONOCITOS, EOSINOFILOS, BASOFILOS, CONTAGEM_ERITROCITOS, HEMOGLOBINA, HEMATOCRITO, VOLUME_CORPUSCULAR_MEDIO, HEMOGLOBINA_CORPUSCULAR_MEDIA, CONC_HEMOGLOBINA_CORPUSCULAR_MEDIA, AMPLITUDE_DIST_ERITROCITARIA, CONTAGEM_PLAQUETAS, VOLUME_PLAQUETARIO_MEDIO) VALUES ('2023-10-25', '12345678997', 6200, 54, 31, 10, 3, 2, 4.6, 14.5, 43.0, 91.0, 31.0, 33.5, 12.5, 255000, 10.5);



